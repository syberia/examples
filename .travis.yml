language: r
dist: trusty
sudo: required
r:
    - oldrel
    - release
    - devel
env:
  - global:
    - R_LIBS_USER=~/.R/library

r_binary_packages:
    - httr
    - yaml
    - digest
    - crayon

r_github_packages:
    - syberia/mungebits2
    - syberia/stagerunner
    - syberia/tundra
    - syberia/director
    - syberia/syberia

latex: false
cache:
  directories:
      - ~/.R
  packages: true

script: 
    - Rscript -e 'library(syberia); library(methods); devtools::with_options(list(stub
  = 1), force); syberia::syberia_engine(); quit(status = tryCatch({ syberia::test_engine();
  0 }, error = function(e) { message(e); message(bettertrace::stacktrace()); 1 }));'

notifications:
  email:
    on_success: change
    on_failure: change
